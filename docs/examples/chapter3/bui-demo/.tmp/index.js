"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));window.router=bui.router(),bui.ready(function(n){router.init({id:"#bui-router",progress:!0,hash:!0,indexModule:{template:"pages/login/index.html",script:"pages/login/index.js"},beforeLoad:function(i){var a=n.storage.get("token",0);if("main"!==i.target.name&&!a)return bui.load({url:"main"}),!1}}),bui.btn({id:"#bui-router",handle:".bui-btn"}).load(),$("#bui-router").on("click",".btn-back",function(i){bui.back()})}),loader.set("pages/article/article",{template:function(){return'<div class="bui-page bui-box-vertical">\n    <header>\n        <div class="bui-bar">\n            <div class="bui-bar-left">\n                <div class="bui-btn" onclick="bui.back();"><i class="icon-back"></i></div>\n            </div>\n            <div class="bui-bar-main">文章详情</div>\n            <div class="bui-bar-right">\n                <div class="bui-btn btn-share"><i class="icon-share"></i></div>\n            </div>\n        </div>\n    </header>\n    <main>\n        <article class="bui-article" b-template="article.tpl(article.datas)">\n            \x3c!-- <h1>标题</h1>\n            <div class="article-info bui-box">\n                <span class="article-from">广州党支部</span>\n                <div class="span1"> <i class="icon-time"> 2018-03-14</i></div>\n                <i class="icon-comment"> 42</i>\n                <i class="icon-eye"> 142</i>\n            </div>\n            <section>\n                <p>11月1日，温江区检察院召开党组（扩大）会议，传达学习党的十九大精神，研究学习宣传贯彻工作。会议由党组书记、检察长钟磊主持，院领导、全体部门负责人参加。</p>\n\n                <p><img src="http://www.easybui.com/demo/images/article-img.jpg" alt=""></p>\n\n                <h3>小节标题</h3>\n                <p id="section">会上首先传达学习了党的十九大精神以及省、市、区委常委（扩大）会议精神，省、市、区传达学习党的十九大精神大会精神和市院党组（扩大）会议精神。院领导结合检察工作实际，逐一谈学习十九大精神感想和体会。钟磊检察长结合自身检察工作实际，分享自己学习十九大精神感想和体会，并作讲话。</p>\n            </section> --\x3e\n        </article>\n    </main>\n</div>'},loaded:function(i,a,e,s){var n=bui.history.getParams(e.id);bui.store({el:"#".concat(e.id),scope:"article",data:{datas:{}},methods:{bindShare:function(){bui.actionsheet({trigger:".btn-share",buttons:[{name:"分享到微博",value:"weibo"},{name:"朋友圈",value:"pyq"}],callback:function(i){"cancel"==$(i.target).attr("value")&&this.hide()}})},getDetail:function(a){var n=this;s.ajax({url:"".concat(e.path,"article.json"),data:{id:a}}).then(function(i){i=bui.array.get(i.data,a,"id");n.datas=i},function(i,a){})}},templates:{tpl:function(i){return"<h1>".concat(i.title,'</h1>\n                <div class="article-info bui-box">\n                    <span class="article-from">互联网</span>\n                    <div class="span1"> <i class="icon-time"> 2021-03-14</i></div>\n                    <i class="icon-comment"> 42</i>\n                    <i class="icon-eye"> 142</i>\n                </div>\n                <section>\n                    <p><img src="').concat(i.image,'" alt=""></p>\n                    ').concat(i.content,"\n                </section>")}},mounted:function(){this.getDetail(n.id),this.bindShare()}})}}),loader.set("pages/components/slide/slide",{template:function(){return'<div class="bui-slide bui-slide-skin01"></div>'},loaded:function(i,a,n,e){var s=n.props;return s.id="#".concat(n.id," .bui-slide"),s.height=s.height||200,s.autopage=!0,s.data=s.data||[{image:"http://easybui.com/demo/images/banner01.png"},{image:"http://easybui.com/demo/images/banner02.png"}],bui.slide(s)}}),loader.set("main",{template:function(){return'<div id="loginpage" class="bui-page bui-box-vertical">\n    <header>\n       <div class="bui-bar">\n        <div class="bui-bar-left">\n        </div>\n        <div class="bui-bar-main">登录页</div>\n        <div class="bui-bar-right">\n            \x3c!-- 右边按钮 --\x3e\n        </div>\n       </div>\n    </header>\n    <main>\n        <ul class="bui-list">\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">帐号</label>\n                <div class="span1">\n                    <input type="text" class="bui-input" value="" placeholder="请输入账号" b-model="form.datas.username">\n                </div>\n            </li>\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">密码</label>\n                <div class="span1">\n                    <input type="password" class="bui-input" value="" placeholder="请输入密码" b-model="form.datas.password">\n                </div>\n            </li>\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">保存密码</label>\n                <div class="span1">\n                    <input type="checkbox" class="bui-checkbox" b-model="form.datas.save">\n                </div>\n            </li>\n        </ul>\n        <div class="container-y">\n            <div class="bui-box-space">\n                <div class="span1">\n                    <div class="bui-btn round" href="pages/register/index.html">注册</div>\n                </div>\n                <div class="span1">\n                    <div class="bui-btn round primary" b-click="form.submit">登录</div>\n                </div>\n            </div>\n        </div>\n    </main>\n</div>\n'},loaded:function(i,a,n,e){return bui.store({el:"#loginpage",scope:"form",data:{datas:{username:"",password:"",save:!1}},methods:{checkForm:function(i){for(var a in i)if(""===i[a])return bui.hint("".concat(a,"的内容不能为空")),!1;return!0},savePassword:function(i){this.$data.datas.save?e.storage.set("userinfo",i):e.storage.remove("userinfo")},submit:function(){var a=this;this.checkForm(this.datas)&&bui.ajax({url:e.apiurl+"json/token.json",data:this.datas}).then(function(i){bui.hint("登录成功"),a.savePassword(a.$data.datas),e.storage.set("token",i.data),bui.load({url:"pages/main/main.html"})})}},templates:{},mounted:function(){var i=e.storage.get("userinfo",0);"object"===(0,_typeof2.default)(i)&&(this.datas=i)}})}}),loader.set("pages/login/page",{template:function(){return'<div id="loginpart" class="bui-page bui-box-vertical">\n    <header>\n       <div class="bui-bar">\n        <div class="bui-bar-left">\n            <a class="bui-btn" b-click="form.close"><i class="icon-back"></i></a>\n        </div>\n        <div class="bui-bar-main">弹出登录页</div>\n        <div class="bui-bar-right">\n            \x3c!-- 右边按钮 --\x3e\n        </div>\n       </div>\n    </header>\n    <main>\n        <ul class="bui-list">\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">帐号</label>\n                <div class="span1">\n                    <input type="text" class="bui-input" value="" placeholder="请输入邮箱@qq.com" b-model="form.datas.username">\n                </div>\n            </li>\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">密码</label>\n                <div class="span1">\n                    <input type="password" class="bui-input" value="" placeholder="请输入密码" b-model="form.datas.password">\n                </div>\n            </li>\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">保存密码</label>\n                <div class="span1">\n                    <input type="checkbox" class="bui-checkbox" b-model="form.datas.save">\n                </div>\n            </li>\n        </ul>\n        <div class="container-y">\n            <div class="bui-box-space">\n                <div class="span1">\n                    <div class="bui-btn round primary" b-click="form.submit">登录</div>\n                </div>\n            </div>\n        </div>\n    </main>\n</div>\n'},loaded:function(i,a,n,e){return bui.store({el:"#loginpart",scope:"form",data:{datas:{username:"",password:"",save:!1}},methods:{checkForm:function(i){for(var a in i)if(""===i[a])return bui.hint("".concat(a,"的内容不能为空")),!1;return!0},savePassword:function(i){this.$data.datas.save?e.storage.set("userinfo",i):e.storage.remove("userinfo")},close:function(){bui.history.getPageDialog(n.id).close()},submit:function(){var a=this;this.checkForm(this.datas)&&bui.ajax({url:e.apiurl+"json/token.json",data:this.datas}).then(function(i){bui.hint("登录成功"),a.savePassword(a.$data.datas),a.close(),bui.history.getLast("exports").refresh()})}},templates:{},mounted:function(){var i=e.storage.get("userinfo",0);"object"===(0,_typeof2.default)(i)&&(this.datas=i)}})}}),loader.set("pages/main/cart",{template:function(){return""},loaded:function(i,a,n,e){var s=[];return{data:s,add:function(i){s.push(i),console.log(s)},remove:function(i){bui.array.delete(s,i,"id")}}}}),loader.set("pages/main/main",{template:function(){return'\x3c!-- 这里还是一个标准的BUI页面 --\x3e\n<div class="bui-page bui-box-vertical">\n    <header>\n        <div class="bui-bar">\n            <div class="bui-bar-left">\n                \x3c!-- 左边有图标示例 --\x3e\n                <div class="bui-btn btn-back"><i class="icon-back"></i></div>\n            </div>\n            <div class="bui-bar-main">BUI单页开发工程模板</div>\n            <div class="bui-bar-right">\n                \x3c!-- 右边有图标示例 --\x3e\n                <div class="bui-btn" b-click="list.login"><i class="icon-info"></i></div>\n            </div>\n        </div>\n    </header>\n    <main>\n        <component id="slide" name="pages/components/slide/slide" height="300" delay="true"></component>\n\n        \x3c!-- 中间内容 --\x3e\n        <ul class="bui-list" b-template="list.tplList(list.datas)">\n            \x3c!-- \n                <li class="bui-btn bui-box">\n                    <div class="thumbnail"><img src="images/applogo.png"></div>\n                    <div class="span1">文本</div>\n                    <i class="icon-listright"></i>\n                </li> \n            --\x3e\n        </ul>\n    </main>\n    <footer>\n        \x3c!-- 底部内容 --\x3e\n    </footer>\n</div>'},loaded:function(i,a,n,e){e.ajax({url:e.apiurl+"json/slide.json"}).then(function(i){i=i.data.map(function(i,a){return{image:"http://easybui.com/demo/"+i.image}});loader.delay({id:"#slide",param:{height:300,data:i}})});var s=null;return bui.store({el:"#".concat(n.id),scope:"list",data:{datas:[]},mounted:function(){this.getList({url:"".concat(n.path,"main.json"),data:{}})},methods:{login:function(){s?s.open():s=bui.page({url:"pages/login/page.html",param:{}})},refresh:function(){this.datas.push({id:"bui4",title:"文章标题4",image:"images/applogo.png",desc:"文章的内容简介"})},getList:function(i){var a=this;bui.ajax(i).then(function(i){a.datas=i.data},function(i,a){})}},watch:{},computed:{},templates:{tplList:function(i){var a="";return i.forEach(function(i){a+='<li class="bui-btn bui-box" href="pages/article/article.html?id='.concat(i.id,'">\n                            <div class="thumbnail"><img src="').concat(i.image,'"></div>\n                            <div class="span1">').concat(i.title,'</div>\n                            <i class="icon-listright"></i>\n                        </li>')}),a}}})}}),loader.set("pages/register/index",{template:function(){return'<div id="formpage" class="bui-page bui-box-vertical">\n    <header>\n       <div class="bui-bar">\n        <div class="bui-bar-left">\n            <a class="bui-btn" onclick="bui.back();"><i class="icon-back"></i></a>\n        </div>\n        <div class="bui-bar-main">注册页</div>\n        <div class="bui-bar-right">\n            \x3c!-- 右边按钮 --\x3e\n        </div>\n       </div>\n    </header>\n    <main>\n        <ul class="bui-list">\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">帐号</label>\n                <div class="span1">\n                    <input type="text" class="bui-input" value="" placeholder="请输入邮箱@qq.com" b-model="form.datas.username" b-blur="form.checkRule($this,\'username\')" rule="/.+@qq.com/gim" tip="正确格式为：xxx@qq.com">\n                </div>\n            </li>\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">密码</label>\n                <div class="span1">\n                    <input type="password" class="bui-input" value="" placeholder="请输入密码" b-model="form.datas.password">\n                </div>\n            </li>\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">确认密码</label>\n                <div class="span1">\n                    <input type="password" class="bui-input" value="" placeholder="请再次输入密码" b-model="form.datas.comfirmpassword">\n                </div>\n            </li>\n            <li class="bui-btn bui-box clearactive">\n                <label class="bui-label">性别</label>\n                <div class="span1">\n                    <label><input type="radio" class="bui-radio" value="woman" b-model="form.datas.sex">女</label>\n                    <label><input type="radio" class="bui-radio" value="man" b-model="form.datas.sex">男</label>\n                </div>\n            </li>\n        </ul>\n    </main>\n    <footer>\n        <div class="container-y">\n            <div class="bui-box-space">\n                <div class="span1">\n                    <div class="bui-btn round" b-click="form.reset">重置</div>\n                </div>\n                <div class="span1">\n                    <div class="bui-btn round primary" b-click="form.submit">提交</div>\n                </div>\n            </div>\n        </div>\n    </footer>\n</div>\n'},loaded:function(i,a,n,e){return bui.store({el:"#formpage",scope:"form",data:{datas:{username:"",password:"",comfirmpassword:"",sex:"woman"}},methods:{regexFromString:function(i){i=/^\/(.*)\/([a-z]*)$/.exec(i);return new RegExp(i[1],i[2])},checkRule:function(i,a){var n=i.getAttribute("rule"),e=i.getAttribute("tip"),n=this.regexFromString(n),i=i.value;if(i&&!n.test(i))return bui.hint(e),!1},checkForm:function(i){for(var a in i)if(""===i[a])return bui.hint("".concat(a,"的内容不能为空")),!1;return i.password!==i.comfirmpassword&&bui.hint("两次密码不一致，请检查后提交"),!0},submit:function(){this.checkForm(this.datas)&&bui.ajax({url:e.apiurl+"json/token.json",data:this.datas}).then(function(i){bui.hint("提交成功")})},reset:function(){this.datas={username:"",password:"",comfirmpassword:"",sex:""},bui.hint("重置成功")}},templates:{},mounted:function(){}})}});