<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>src/scripts/method/bui.touch.js - BUI</title>
    <!-- <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css"> -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="../assets/css/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="../assets/js/jquery-1.9.1.min.js"></script>
</head>

<body class="yui3-skin-sam">
    <div id="sidemenu" class="sidebar-menu">菜单</div>
    <div id="doc">
        <div id="hd" class="yui3-g header" style="display: none;">
            <div class="yui3-u-3-4">
                <h1><a href="../index.html"><img src="../assets/css/logo.png"
                            title="BUI" width="30px"></a>
                    <a href="../index.html">BUI</a>
                </h1>
                <p class="off-left">其它版本:<select name="" id="" onchange="window.open(this.value)">
                        <option value="../api/index.html" selected>1.8.x</option>
                        <option value="../api-1.7.x/index.html">1.7.x</option>
                        <option value="../api-1.6.x/index.html">1.6.x</option>
                        <option value="../api-1.5.x/index.html">1.5.x</option>
                        <option value="../api-1.4.8/index.html">1.4.x</option>
                    </select></p>
                <p class="off-left" style="font-size:12px;margin-right: 15px;">API for BUI
                    1.8.x </p>

            </div>
        </div>
        <div id="bd" class="yui3-g" style="padding-top: 0;">
            <div id="sidebar" class="yui3-u-1-4" style="top:0;">

                <a href="../index.html"
                    style="display: block;padding:6px;font-size:16px;background:#fff;position:absolute;z-index:1000;width:70px;letter-spacing:2px;text-align:right;left:220px;top:20px;color:#333;">返回</a>

                <div id="docs-sidebar" class="sidebar apidocs">
                    <div id="api-list">
                        <div id="api-tabview" class="tabview">
                    
                            <ul class="tabs">
                                <li><a href="#api-classes">Classes</a></li>
                                <li><a href="#api-modules">Modules</a></li>
                            </ul>
                    
                            <div id="api-tabview-filter">
                                <input type="search" id="api-filter" placeholder="Type to filter APIs">
                            </div>
                    
                            <div id="api-tabview-panel">
                                <ul id="api-classes" class="apis classes">
                                    <li><a href="../classes/bui.accordion.html">bui.accordion</a></li>
                                    <li><a href="../classes/bui.actionsheet.html">bui.actionsheet</a></li>
                                    <li><a href="../classes/bui.ajax.html">bui.ajax</a></li>
                                    <li><a href="../classes/bui.alert.html">bui.alert</a></li>
                                    <li><a href="../classes/bui.all.html">bui.all</a></li>
                                    <li><a href="../classes/bui.animate.html">bui.animate</a></li>
                                    <li><a href="../classes/bui.array.html">bui.array</a></li>
                                    <li><a href="../classes/bui.back.html">bui.back</a></li>
                                    <li><a href="../classes/bui.btn.html">bui.btn</a></li>
                                    <li><a href="../classes/bui.checkVersion.html">bui.checkVersion</a></li>
                                    <li><a href="../classes/bui.cmd.html">bui.cmd</a></li>
                                    <li><a href="../classes/bui.config.html">bui.config</a></li>
                                    <li><a href="../classes/bui.confirm.html">bui.confirm</a></li>
                                    <li><a href="../classes/bui.date.html">bui.date</a></li>
                                    <li><a href="../classes/bui.delete.html">bui.delete</a></li>
                                    <li><a href="../classes/bui.dialog.html">bui.dialog</a></li>
                                    <li><a href="../classes/bui.download.html">bui.download</a></li>
                                    <li><a href="../classes/bui.dropdown.html">bui.dropdown</a></li>
                                    <li><a href="../classes/bui.emitter.html">bui.emitter</a></li>
                                    <li><a href="../classes/bui.extend.html">bui.extend</a></li>
                                    <li><a href="../classes/bui.file.html">bui.file</a></li>
                                    <li><a href="../classes/bui.fileselect.html">bui.fileselect</a></li>
                                    <li><a href="../classes/bui.floor.html">bui.floor</a></li>
                                    <li><a href="../classes/bui.get.html">bui.get</a></li>
                                    <li><a href="../classes/bui.getPageParams.html">bui.getPageParams</a></li>
                                    <li><a href="../classes/bui.guid.html">bui.guid</a></li>
                                    <li><a href="../classes/bui.hint.html">bui.hint</a></li>
                                    <li><a href="../classes/bui.history.html">bui.history</a></li>
                                    <li><a href="../classes/bui.init.html">bui.init</a></li>
                                    <li><a href="../classes/bui.input.html">bui.input</a></li>
                                    <li><a href="../classes/bui.levelselect.html">bui.levelselect</a></li>
                                    <li><a href="../classes/bui.list.html">bui.list</a></li>
                                    <li><a href="../classes/bui.listview.html">bui.listview</a></li>
                                    <li><a href="../classes/bui.load.html">bui.load</a></li>
                                    <li><a href="../classes/bui.loader.html">bui.loader</a></li>
                                    <li><a href="../classes/bui.loading.html">bui.loading</a></li>
                                    <li><a href="../classes/bui.mask.html">bui.mask</a></li>
                                    <li><a href="../classes/bui.number.html">bui.number</a></li>
                                    <li><a href="../classes/bui.page.html">bui.page</a></li>
                                    <li><a href="../classes/bui.pickerdate.html">bui.pickerdate</a></li>
                                    <li><a href="../classes/bui.platform.html">bui.platform</a></li>
                                    <li><a href="../classes/bui.popover.html">bui.popover</a></li>
                                    <li><a href="../classes/bui.post.html">bui.post</a></li>
                                    <li><a href="../classes/bui.prompt.html">bui.prompt</a></li>
                                    <li><a href="../classes/bui.pullrefresh.html">bui.pullrefresh</a></li>
                                    <li><a href="../classes/bui.put.html">bui.put</a></li>
                                    <li><a href="../classes/bui.rating.html">bui.rating</a></li>
                                    <li><a href="../classes/bui.ready.html">bui.ready</a></li>
                                    <li><a href="../classes/bui.refresh.html">bui.refresh</a></li>
                                    <li><a href="../classes/bui.router.html">bui.router</a></li>
                                    <li><a href="../classes/bui.run.html">bui.run</a></li>
                                    <li><a href="../classes/bui.scroll.html">bui.scroll</a></li>
                                    <li><a href="../classes/bui.searchbar.html">bui.searchbar</a></li>
                                    <li><a href="../classes/bui.select.html">bui.select</a></li>
                                    <li><a href="../classes/bui.setting.html">bui.setting</a></li>
                                    <li><a href="../classes/bui.sidebar.html">bui.sidebar</a></li>
                                    <li><a href="../classes/bui.slide.html">bui.slide</a></li>
                                    <li><a href="../classes/bui.stepbar.html">bui.stepbar</a></li>
                                    <li><a href="../classes/bui.storage.html">bui.storage</a></li>
                                    <li><a href="../classes/bui.store.html">bui.store</a></li>
                                    <li><a href="../classes/bui.swipe.html">bui.swipe</a></li>
                                    <li><a href="../classes/bui.tab.html">bui.tab</a></li>
                                    <li><a href="../classes/bui.timer.html">bui.timer</a></li>
                                    <li><a href="../classes/bui.toggle.html">bui.toggle</a></li>
                                    <li><a href="../classes/bui.touch.html">bui.touch</a></li>
                                    <li><a href="../classes/bui.typeof.html">bui.typeof</a></li>
                                    <li><a href="../classes/bui.unit.html">bui.unit</a></li>
                                    <li><a href="../classes/bui.upload.html">bui.upload</a></li>
                                    <li><a href="../classes/bui.viewport.html">bui.viewport</a></li>
                                </ul>
                    
                                <ul id="api-modules" class="apis modules">
                                    <li><a href="../modules/Animate.html">Animate</a></li>
                                    <li><a href="../modules/Core.html">Core</a></li>
                                    <li><a href="../modules/Event.html">Event</a></li>
                                    <li><a href="../modules/Method.html">Method</a></li>
                                    <li><a href="../modules/Native.html">Native</a></li>
                                    <li><a href="../modules/UI.html">UI</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <script>
                        // iframe 里执行脚本，通过引入index.js 的方式无法成功
                        function sidebarInit() {
                            var sidebarHeight = $(window).height() - 153;
                    
                            $("#api-tabview-panel").height(sidebarHeight);
                        }
                        sidebarInit();
                    </script>                </div>
            </div>
            <div class="yui3-u-3-4">
                    <div id="api-options">
                        Show:
                        <label for="api-show-inherited">
                            <input type="checkbox" id="api-show-inherited" checked>
                            Inherited
                        </label>
                
                        <label for="api-show-protected">
                            <input type="checkbox" id="api-show-protected">
                            Protected
                        </label>
                
                        <label for="api-show-private">
                            <input type="checkbox" id="api-show-private">
                            Private
                        </label>
                        <label for="api-show-deprecated">
                            <input type="checkbox" id="api-show-deprecated">
                            Deprecated
                        </label>
                
                    </div>
                
                <div class="apidocs">
                    <div id="docs-main">
                        <div class="content">
                            <h1 class="file-heading">File: src/scripts/method/bui.touch.js</h1>
                            
                            <div class="file">
                                <pre class="code prettyprint linenums">
                            /**
                             * 常用方法库
                             * @module Method
                             */
                            
                            ;
                            (function (ui, $) {
                            
                                /**
                                 * 兼容PC的拖拽事件库，支持 swipe , drag, longtap 等事件
                                 * @namespace  bui
                                 * @class  touch
                                 * @since  1.8.0
                                 * @constructor
                                 * @param {object} [option]  
                                 * @param {string|object} option.id  拖拽的对象或者选择器, 必须
                                 * @param {string} [option.children]  容器里的子选择器，默认为 &quot;&quot;
                                 * @param {string} [option.handle]  按住容器里的某个选择器才能实现拖拽，默认为 &quot;&quot;
                                 * @param {string} [option.stopHandle]  按住容器里的某个选择器不能实现拖拽，默认为 &quot;&quot;
                                 * @param {boolean} [option.dragable]  允许拖拽 默认 false | true
                                 * @param {string} [option.moveType]  通过哪种方式来实现移动，默认为 &quot;position&quot; | &quot;transform&quot; 
                                 * @param {string} [option.direction]  移动的方向，默认为 &quot;xy&quot; 水平垂直 | &quot;x&quot; 水平 | &quot;y&quot; 垂直
                                 * @param {boolean} [option.dragup]  单独控制某个方向是否允许往上 默认 true | false
                                 * @param {boolean} [option.dragdown]  单独控制某个方向是否允许往下 默认 true | false
                                 * @param {boolean} [option.dragleft]  单独控制某个方向是否允许往左 默认 true | false
                                 * @param {boolean} [option.dragright]  单独控制某个方向是否允许往右 默认 true | false
                                 * @param {boolean} [option.useScroll]  内容里面有滚动条的时候，优先滚动，不允许拖拽 默认 true | false
                                 * @param {boolean} [option.stopPropagation]  阻止往上冒泡 默认 false ｜ true
                                 * @param {function} [option.swipeDistance]  滑动的距离 默认 60 ，PC的swipe事件只在容器内，超出容器就不会触发swipe事件了
                                 * @param {function} [option.onLongtap]  长按的回调
                                 * @param {number} [option.longtapTime]  默认 1.5
                                 * @param {function} [option.onSwipe]  不管哪个方向，滑动距离大于 swipeDistance 则可以触发回调
                                 * @param {function} [option.onSwipeup]  向上滑动大于滑动距离时触发回调
                                 * @param {function} [option.onSwipedown]  向下滑动大于滑动距离时触发回调
                                 * @param {function} [option.onSwipeleft]  向左滑动大于滑动距离时触发回调
                                 * @param {function} [option.onSwiperight]  向右滑动大于滑动距离时触发回调
                                 * @param {function} [option.onBeforeTouchstart]  按下前触发，返回 false 则接下来的事件都不触发
                                 * @param {function} [option.onTouchstart]  按下触发，返回 false 则接下来的事件都不触发
                                 * @param {function} [option.onBeforeTouchmove]  移动前触发，返回 false 则接下来的移动都不触发
                                 * @param {function} [option.onTouchmove]  移动触发
                                 * @param {function} [option.onBeforeTouchend]  松开鼠标前触发，返回 false 则接下来的swipe都不触发
                                 * @param {function} [option.onTouchend]  松开鼠标触发
                                * @param {function} [option.onBeforeDragstart] [ 进入touchstart前的回调 ]
                                * @param {function} [option.onBeforeDragmove] [ 进入touchmove前的回调 ]
                                * @param {function} [option.onBeforeDragend] [ 进入touchend前的回调 ]
                                * @param {function} [option.onDragstart] [ 开始拖动的回调 ]
                                * @param {function} [option.onDragmove] [ 移动中的回调 ]
                                * @param {function} [option.onDragend] [ 移动后的回调 ]
                                 * @example  
                                 * 
                                 * 
                                    &lt;div id=&quot;drag&quot; class=&quot;bui-position-bottom&quot; style=&quot;width:100px;height:100px;background:red;&quot;&gt;&lt;/div&gt;
                            
                                    
                                    var uiTouch = bui.touch({
                                        id: &quot;#drag&quot;,
                                        dragable: true,// 拖拽有效时，底下的
                                        onLongtap: function(e){
                                            // 长按触发
                                        },
                                        onDragend: function(e){
                                            // 移动后触发
                                        }
                                    })
                            
                                 */
                                ui.touch = function (option) {
                            
                                    var _config = {
                                        id: &quot;&quot;,
                                        uid: &quot;&quot;,
                                        children: &quot;&quot;,
                                        handle: &quot;&quot;,
                                        stopHandle: &quot;&quot;,
                                        scrollEl: &quot;.bui-page main,.bui-dialog-main,.bui-scroll,.bui-tab-main&gt;ul&gt;li&quot;,
                                        moveEl: &quot;current&quot;, // &quot;current&quot; || &quot;parent&quot; 移动的目标是当前元素,还是父级元素
                                        moveType: &quot;position&quot;, // &quot;position&quot; || &quot;transform&quot;
                                        direction: &quot;xy&quot;, // &quot;xy&quot; || &quot;x&quot; || &quot;y&quot;
                                        // animate: false,
                                        stopPropagation: false,
                                        preventDefault: false,
                                        useScroll: true,    // 有滚动的时候使用滚动，不允许拖拽，false则不影响拖拽
                                        swipeDistance: 60,
                                        zIndex: 10,
                                        dragable: false,
                                        dragup: true,   // 允许拖拉拽某个方向
                                        dragdown: true,
                                        dragleft: true,
                                        dragright: true,
                                        reset: false, // 拖拽多少就是多少，如果为true，小于 swipeDistance 会自动返回之前的位置
                                        swipeup: true,  // 允许 onSwipeup 回调
                                        swipedown: true,
                                        swipeleft: true,
                                        swiperight: true,
                                        onLongtap: null,
                                        longtapTime: 1.5,
                                        onSwipe: null,
                                        onSwipeup: null,
                                        onSwipedown: null,
                                        onSwipeleft: null,
                                        onSwiperight: null,
                                        onBeforeTouchstart: null,
                                        onBeforeTouchmove: null,
                                        onBeforeTouchend: null,
                                        onBeforeTouchcancel: null,
                                        onTouchstart: null,
                                        onTouchmove: null,
                                        onTouchend: null,
                                        onTouchcancel: null
                                    };
                                    var opts = $.extend(true, {}, _config, option);
                            
                                    var eventTouchs = null;
                                    var $id = null;
                                    var $children = null;
                                    var $idParent = null;
                                    var parentPositionDefault = &quot;&quot;;
                                    var flag = false; // 是否有拖动
                                    var dragHistory = [];
                                    var dragHistoryNext = [];//记录后退的拖拽
                            
                                    var $scroll = null;
                            
                                    var lastX = 0,
                                        lastY = 0;
                                    //滑动兼容处理
                                    var touch = {
                                        x1: 0,
                                        x2: 0,
                                        y1: 0,
                                        y2: 0,
                                        distanceX: 0,
                                        distanceY: 0,
                                        lastX: 0,
                                        lastY: 0,
                                        offsetLeft: 0,
                                        offsetTop: 0,
                                        parentOffsetLeft: 0,
                                        parentOffsetTop: 0,
                                        direction: &quot;&quot;
                                    };
                            
                                    var timeout = null, islongtap = false;
                            
                                    var $target = null;
                                    var targetTouch = {};
                                    // 事件缓存，采用新的事件管理 {longtap:{longtap:[]}, swipe:{swipe:[]}}
                                    var allEvent = {};
                            
                                    var module = {
                                        init: init,
                                        touchstart: touchstart,
                                        touchmove: touchmove,
                                        touchend: touchend,
                                        touchcancel: touchcancel,
                                        swipe: swipe,
                                        swipeleft: swipeleft,
                                        swiperight: swiperight,
                                        swipeup: swipeup,
                                        swipedown: swipedown,
                                        getxy: getLastXY,
                                        move: move,
                                        reset: reset,
                                        // prev: prev,
                                        isScale: isScale,
                                        dragable: dragable,
                                        longtap: longtap,
                                        // dropable: dropable,
                                        off: off,
                                    }
                            
                                    /**
                                     * 初始化 
                                     * @namespace  bui
                                     * @method  init
                                     * @constructor
                                     * @example
                                     * 
                                    *  
                                    */
                                    function init(opt) {
                                        eventTouchs = getEvent();
                                        var _opts = opts = $.extend(true, {}, opts, opt);
                                        $id = ui.$(_opts.id);
                                        $scroll = $id.find(_opts.scrollEl);//滚动条的位置默认都是在-main 层
                                        $children = _opts.children ? $id.find(_opts.children) : null;
                                        $idParent = $id.parent();
                            
                                        $target = $children || $id;
                            
                                        if (!$target.length) {
                                            console.warn(&quot;请检查下选择器&quot;, _opts.id, _opts.children);
                                            return;
                                        }
                            
                                        $target.css(&quot;z-index&quot;, _opts.zIndex);
                            
                                        targetTouch = getLastXY($target);
                            
                                        parentPositionDefault = $idParent.css(&quot;position&quot;) || &quot;static&quot;;
                                        // 修正transform的offsetTop获取
                                        if (_opts.moveType === &quot;transform&quot;) {
                                            // 获取父级的transform值, 并设置一下, 这样可以确保 $id 的 offsetTop 的准确性; 相当于设置父级的position:relative; 但就不用每次都去改它. 
                                            var parentxy = getTransformValue($idParent);
                                            $idParent.css({
                                                transform: &#x60;translate(${parentxy.x}px,${parentxy.y}px)&#x60;
                                            })
                                        }
                            
                                        // 注册事件
                                        !_opts.dragable &amp;&amp; _opts.onSwipe &amp;&amp; swipe(_opts.children, _opts.onSwipe);
                                        !_opts.dragable &amp;&amp; _opts.onSwipeleft &amp;&amp; swipeleft(_opts.children, _opts.onSwipeleft);
                                        !_opts.dragable &amp;&amp; _opts.onSwiperight &amp;&amp; swiperight(_opts.children, _opts.onSwiperight);
                                        !_opts.dragable &amp;&amp; _opts.onSwipeup &amp;&amp; swipeup(_opts.children, _opts.onSwipeup);
                                        !_opts.dragable &amp;&amp; _opts.onSwipedown &amp;&amp; swipedown(_opts.children, _opts.onSwipedown);
                                        _opts.onLongtap &amp;&amp; longtap(_opts.onLongtap);
                            
                                        // 默认允许拖懂
                                        dragable(_opts);
                            
                                        // 存储实例
                                        _opts.uid &amp;&amp; ui.history.setUI &amp;&amp; ui.history.setUI({
                                            uid: _opts.uid,
                                            ui: module
                                        })
                            
                                        return this;
                                    }
                            
                                    /**
                                     * 获取最后坐标值, 绝对定位则获取原本的坐标，一般在回调里面使用，通过 this.getxy() 使用
                                     * @namespace  bui
                                     * @method  getLastXY
                                     * @constructor
                                     * @example
                                     * 
                                    *   
                                    */
                                    function getLastXY(el) {
                                        var $el = el ? ui.$(el) : $children || $id;
                            
                                        if (opts.moveType == &quot;position&quot;) {
                                            var last = {
                                                x: parseFloat($el.css(&quot;left&quot;)),
                                                y: parseFloat($el.css(&quot;top&quot;))
                                            };
                                            return last;
                                        } else {
                            
                                            var trans = getTransformValue($el);
                            
                                            return trans;
                                        }
                                    }
                            
                                    // 增加事件
                                    function addEvent(type, handle, callback) {
                                        if (typeof handle === &quot;function&quot;) {
                                            callback = handle;
                                            handle = type;//默认keyname
                                        } else {
                                            handle = handle || type;
                                            callback = callback;
                                        }
                                        // if (!allEvent[type]) {
                                        //     allEvent[type] = {};
                                        //     allEvent[type][handle] = allEvent[type][handle] || [];
                                        // }
                                        // // 按需增加
                                        // allEvent[type][handle].push(callback);
                                        if (!allEvent[type]) {
                                            allEvent[type] = allEvent[type] || [];
                                        }
                                        // 按需增加
                                        allEvent[type].push(callback);
                            
                                        return this;
                                    }
                                    // 长按事件
                                    /**
                                     * 长按事件
                                     * @namespace  bui
                                     * @method  longtap
                                     * @since  1.8.1
                                     * @constructor
                                     * @example
                                     * 
                                    *   uiTouch.longtap(function(e){
                                    *       // 绑定长按
                                    *   })
                                    */
                                    function longtap(handle, callback) {
                                        addEvent(&#x27;longtap&#x27;, handle, callback);
                            
                                        return this;
                                    }
                            
                                    /**
                                     * swipe公共事件，上下左右都会触发
                                     * @namespace  bui
                                     * @method  swipe
                                     * @since  1.8.0
                                     * @constructor
                                     * @example
                                     * 
                                    *   uiTouch.swipe(function(e){
                                    *       // 回调
                                    *   })
                                    */
                                    function swipe(handle, callback) {
                                        addEvent(&#x27;swipe&#x27;, handle, callback);
                                        return this;
                                    }
                            
                                    // 
                                    /**
                                     * 左滑事件
                                     * @namespace  bui
                                     * @method  swipeleft
                                     * @since  1.8.0
                                     * @constructor
                                     * @example
                                     * 
                                    *   uiTouch.swipeleft(function(e){
                                    *       // 回调
                                    *   })
                                    */
                                    function swipeleft(handle, callback) {
                                        addEvent(&#x27;swipeleft&#x27;, handle, callback);
                                        return this;
                                    }
                                    /**
                                     * 右滑事件
                                     * @namespace  bui
                                     * @method  swiperight
                                     * @since  1.8.0
                                     * @constructor
                                     * @example
                                     * 
                                    *   uiTouch.swiperight(function(e){
                                    *       // 回调
                                    *   })
                                    */
                                    function swiperight(handle, callback) {
                                        addEvent(&#x27;swiperight&#x27;, handle, callback);
                                        return this;
                                    }
                                    /**
                                     * 上滑事件
                                     * @namespace  bui
                                     * @method  swipeup
                                     * @since  1.8.0
                                     * @constructor
                                     * @example
                                     * 
                                    *   uiTouch.swipeup(function(e){
                                    *       // 回调
                                    *   })
                                    */
                                    function swipeup(handle, callback) {
                                        addEvent(&#x27;swipeup&#x27;, handle, callback);
                                        return this;
                                    }
                                    /**
                                     * 上滑事件
                                     * @namespace  bui
                                     * @method  swipedown
                                     * @since  1.8.0
                                     * @constructor
                                     * @example
                                     * 
                                    *   uiTouch.swipedown(function(e){
                                    *       // 回调
                                    *   })
                                    */
                                    function swipedown(handle, callback) {
                                        addEvent(&#x27;swipedown&#x27;, handle, callback);
                                        return this;
                                    }
                            
                                    // 获取transform的值, 有translate,translateX,translateY 等类型
                                    function getTransformValue(el) {
                                        var $el = el || $id;
                                        var item = {};
                                        var transformStyle = $el.css(&quot;transform&quot;) || &quot;&quot;;
                            
                                        var indexY = transformStyle.indexOf(&quot;translateY&quot;);
                                        var vals = transformStyle.match(/(\-?[0-9]\d*\.?\d*)|(0\.\d*[0-9])/g);
                            
                                        item.x = indexY === -1 &amp;&amp; vals &amp;&amp; vals[0] || 0;
                                        // y 的时候是用的 translateY , xy 的时候是用的 translateX
                                        if (indexY === 0) {
                                            item.y = vals &amp;&amp; vals[0] || 0;
                                        } else {
                                            item.y = vals &amp;&amp; vals.length &gt; 1 ? vals[1] : 0
                                        }
                            
                            
                                        item.x = parseFloat(item.x);
                                        item.y = parseFloat(item.y);
                            
                                        return item;
                                    }
                            
                                    // 批量执行事件
                                    function doit(data, e, touch) {
                            
                                        if (data &amp;&amp; ui.typeof(data) === &quot;array&quot; &amp;&amp; data.length) {
                            
                                            let prevResult = true;
                                            for (let index in data) {
                                                let item = data[index];
                                                // 按顺序执行 其中有一个事件return false 后，将不再执行后面事件
                                                // if (prevResult === false) {
                                                //     return false;
                                                // }
                                                prevResult = item.call(module, e, touch);
                                            }
                                        }
                                        return this;
                                    }
                                    function touchstart(handle, callback) {
                                        handle = handle || opts.children
                                        $id.off(eventTouchs.touchstart, handle).on(eventTouchs.touchstart, handle, function (e) {
                                            flag = true;
                                            var targetTouches = e.touches ? e.touches[0] : e;
                                            // 父级
                                            var $parent = $(this).parent();
                            
                                            // 修复offsetTop偏移问题
                                            // $idParent.css(&quot;position&quot;, &quot;relative&quot;);
                                            // 记录初始的坐标值
                                            touch.x1 = targetTouches.clientX;
                                            touch.y1 = targetTouches.clientY;
                                            touch.direction = &quot;&quot;;
                            
                                            touch.offsetLeft = this.offsetLeft;
                                            touch.offsetTop = this.offsetTop;
                            
                                            touch.parentOffsetLeft = $parent[0].offsetLeft;
                                            touch.parentOffsetTop = $parent[0].offsetTop;
                            
                                            // 获取最后坐标值
                                            // 移动的目标
                                            var $moveEl = opts.moveEl == &quot;current&quot; &amp;&amp; $children ? $children : $id;
                                            // 重新获取最后的坐标
                                            var lastDistance = getLastXY($moveEl);
                            
                                            lastX = lastDistance.x;
                                            lastY = lastDistance.y;
                            
                                            touch.lastX = lastX;
                                            touch.lastY = lastY;
                            
                                            if (timeout) {
                                                clearTimeout(timeout);
                                                islongtap = false;
                                            }
                                            // 长按事件
                                            timeout = setTimeout(function () {
                                                islongtap = true;
                                                // 不允许触发移动
                                                flag = false;
                                                opts.onLongtap &amp;&amp; opts.onLongtap.call(module, e, touch);
                            
                                                // 批量执行
                                                doit(allEvent[&quot;longtap&quot;], e, touch);
                            
                                            }, opts.longtapTime * 500);
                            
                                            // 如果两个手指操作, 那不允许滑动
                                            if (isScale(e)) {
                                                flag = false;
                                                return false;
                                            }
                            
                            
                                            // 是否阻止冒泡
                                            opts.stopPropagation &amp;&amp; e.stopPropagation();
                                            // 
                                            var canTouchNext = opts.onBeforeTouchstart &amp;&amp; opts.onBeforeTouchstart.call(module, e, touch);
                                            if (canTouchNext === false) {
                                                flag = false;
                                                return false;
                                            }
                                            // 排除掉某个样式
                                            if (opts.stopHandle &amp;&amp; ui.unit.checkTargetInclude(e.target, opts.stopHandle)) {
                                                flag = false;
                                                return;
                                            }
                                            // 指定某个样式才会有效
                                            if (opts.handle &amp;&amp; !ui.unit.checkTargetInclude(e.target, opts.handle)) {
                                                flag = false;
                                                return;
                                            }
                                            // 是否允许拖动
                                            var canMove = callback &amp;&amp; callback.call(module, e, touch);
                                            if (canMove === false) {
                                                flag = false;
                                                return false;
                                            }
                                        });
                                        return this;
                                    }
                            
                                    // 检测有没有多个手指滑动的情况
                                    function isScale(e) {
                                        //当屏幕有多个touch或者页面被缩放过，就不执行move操作
                                        if ((e.touches &amp;&amp; e.touches.length &gt; 1) || (e.scale &amp;&amp; e.scale !== 1)) {
                                            return true;
                                        }
                                        return false;
                                    }
                            
                                    // 移动过程中的处理
                                    function touchmove(handle, callback) {
                                        handle = handle || opts.children
                            
                                        $id.off(eventTouchs.touchmove, handle).on(eventTouchs.touchmove, handle, function (e) {
                                            if (flag) {
                            
                                                var targetTouches = e.touches ? e.touches[0] : e;
                                                touch.x2 = targetTouches.clientX;
                                                touch.y2 = targetTouches.clientY;
                                                // 移动的距离
                                                touch.distanceX = touch.x2 - touch.x1;
                                                touch.distanceY = touch.y2 - touch.y1;
                                                // 距离加上本身的位置,可以得到最终的位置
                                                touch.lastX = touch.offsetLeft + (opts.moveType == &quot;position&quot; ? 0 : lastX) + touch.distanceX;
                                                touch.lastY = touch.offsetTop + (opts.moveType == &quot;position&quot; ? 0 : lastY) + touch.distanceY;
                            
                                                if (timeout &amp;&amp; (Math.abs(touch.distanceX) &gt; 1) || (Math.abs(touch.distanceY) &gt; 1)) {
                            
                                                    clearTimeout(timeout);
                                                    timeout = null;
                                                    islongtap = false;
                                                }
                            
                                                //第一次下拉的方向
                                                if (!touch.direction) {
                                                    //方向
                                                    touch.direction = ui.swipeDirection(touch.x1, touch.x2, touch.y1, touch.y2);
                                                }
                            
                                                // 是否阻止冒泡
                                                opts.stopPropagation &amp;&amp; e.stopPropagation();
                                                // 
                                                var canTouchNext = opts.onBeforeTouchmove &amp;&amp; opts.onBeforeTouchmove.call(module, e, touch);
                                                if (canTouchNext === false) {
                                                    return false;
                                                }
                                                // 是否允许拖动
                                                var canMove = callback &amp;&amp; callback.call(module, e, touch);
                                                if (canMove === false) {
                                                    return false;
                                                }
                            
                                            }
                                        });
                                        return this;
                                    }
                            
                                    function touchend(handle, callback) {
                                        handle = handle || opts.children
                            
                                        $id.off(eventTouchs.touchend, handle).on(eventTouchs.touchend, handle, function (e) {
                            
                                            var canTouchNext = opts.onBeforeTouchend &amp;&amp; opts.onBeforeTouchend.call(module, e, touch);
                                            if (canTouchNext === false) {
                                                return false;
                                            }
                                            // 长按就不触发dragend
                                            if (islongtap) {
                                                return false;
                                            }
                            
                                            if (timeout) {
                            
                                                clearTimeout(timeout);
                                                timeout = null;
                                                islongtap = false;
                                            }
                                            var hasMoveX = Math.abs(touch.distanceX) &gt; opts.swipeDistance;
                                            var hasMoveY = Math.abs(touch.distanceY) &gt; opts.swipeDistance
                                            // if (Math.abs(touch.distanceX) &gt; opts.swipeDistance) {
                            
                                            // 有移动距离，或者允许回调的时候
                                            switch (touch.direction) {
                                                case &quot;swipeleft&quot;:
                                                    !opts.dragable &amp;&amp; (hasMoveX &amp;&amp; opts.swipeleft) &amp;&amp; doit(allEvent[&quot;swipeleft&quot;], e, touch);;
                                                    break;
                                                case &quot;swiperight&quot;:
                                                    !opts.dragable &amp;&amp; (hasMoveX &amp;&amp; opts.swiperight) &amp;&amp; doit(allEvent[&quot;swiperight&quot;], e, touch);
                                                    break;
                                                case &quot;swipeup&quot;:
                                                    !opts.dragable &amp;&amp; (hasMoveY &amp;&amp; opts.swipeup) &amp;&amp; doit(allEvent[&quot;swipeup&quot;], e, touch);
                                                    break;
                                                case &quot;swipedown&quot;:
                            
                                                    !opts.dragable &amp;&amp; (hasMoveY &amp;&amp; opts.swipedown) &amp;&amp; doit(allEvent[&quot;swipedown&quot;], e, touch);
                            
                                                    break;
                                            }
                                            // 有移动距离的时候，允许触发公共的swipe事件
                                            !opts.dragable &amp;&amp; (hasMoveX || hasMoveY) &amp;&amp; doit(allEvent[&quot;swipe&quot;], e, touch);
                            
                                            // }
                                            // 还原
                                            (!hasMoveX || !hasMoveY) &amp;&amp; opts.reset &amp;&amp; reset();
                                            // 记录每次成功拖拽的信息
                                            dragHistory.push(touch);
                            
                                            // 是否阻止冒泡
                                            opts.stopPropagation &amp;&amp; e.stopPropagation();
                            
                                            callback &amp;&amp; callback.call(module, e, touch);
                                            // 
                                            //清空滑动缓存
                                            clearStatus();
                            
                                        });
                            
                                        return this;
                                    }
                            
                                    // 还原最初状态
                                    function reset(opt) {
                                        var _config = $.extend(true, {
                                            x: lastX,
                                            y: lastY,
                                            animate: true,
                                            callback: null
                                        }, opt);
                            
                                        // dragHistory
                                        var firstHistory = targetTouch //dragHistory[0];
                            
                                        // console.log(targetTouch, firstHistory, 123)
                                        // 记录最后的位置
                                        lastX = 0;//firstHistory.x //firstHistory &amp;&amp; firstHistory.offsetLeft || 0;
                                        lastY = 0;//firstHistory.y // &amp;&amp; firstHistory.offsetTop || 0;
                            
                                        //清空滑动缓存
                                        touch = {
                                            x1: 0,
                                            x2: 0,
                                            y1: 0,
                                            y2: 0,
                                            distanceX: 0,
                                            distanceY: 0,
                                            lastX: lastX,
                                            lastY: lastY,
                                            offsetLeft: 0,
                                            offsetTop: 0,
                                            parentOffsetLeft: 0,
                                            parentOffsetTop: 0,
                                            direction: &quot;&quot;
                                        };
                                        // 
                                        move({
                                            x: touch.lastX,
                                            y: touch.lastY,
                                            animate: true,
                                            callback() {
                            
                                                if (opts.moveType == &quot;position&quot;) {
                                                    $target.css({ &quot;left&quot;: touch.lastX + &#x27;px&#x27;, &quot;top&quot;: touch.lastY + &#x27;px&#x27; });
                                                } else {
                                                    $target.css(&quot;transform&quot;, &#x60;translate(${touch.lastX},${touch.lastY})&#x60;);
                                                }
                                            }
                                        })
                            
                            
                                        dragHistory = [];
                                        // 结束拖拽的状态
                                        flag = false;
                            
                            
                                        return this;
                                    }
                            
                                    // 还原上一次拖动状态
                                    function prev(opt) {
                            
                                        // 还没想到用途
                                        var callback = opt &amp;&amp; opt.callback || null;
                            
                                        // dragHistory
                                        // 记录最后的位置
                                        var lastHistory = dragHistory[dragHistory.length - 1];
                                        var _lastX = lastHistory &amp;&amp; lastHistory.offsetLeft || 0;
                                        var _lastY = lastHistory &amp;&amp; lastHistory.offsetTop || 0;
                            
                                        if (opts.moveType === &quot;transform&quot;) {
                                            _lastX = lastHistory &amp;&amp; (lastHistory.lastX - lastHistory.distanceX) || 0;
                                            _lastY = lastHistory &amp;&amp; (lastHistory.lastY - lastHistory.distanceY) || 0;
                                        }
                            
                            
                                        move({
                                            x: _lastX,
                                            y: _lastY,
                                            animate: true,
                                            callback: callback,
                                        })
                            
                                        //清空滑动缓存
                                        touch = {
                                            x1: 0,
                                            x2: 0,
                                            y1: 0,
                                            y2: 0,
                                            distanceX: 0,
                                            distanceY: 0,
                                            lastX: _lastX,
                                            lastY: _lastY,
                                            offsetLeft: 0,
                                            offsetTop: 0,
                                            parentOffsetLeft: 0,
                                            parentOffsetTop: 0,
                                            direction: &quot;&quot;
                                        };
                            
                                        let item = dragHistory.pop();
                                        dragHistoryNext.push(item);
                                        // 结束拖拽的状态
                                        flag = false;
                                    }
                            
                                    // 还原上一次拖动状态
                                    function next(opt) {
                                        // 还没想到用途
                                    }
                            
                                    // 清除掉默认状态
                                    function clearStatus() {
                            
                                        // 记录最后的位置
                                        lastX = parseFloat(touch.lastX);
                                        lastY = parseFloat(touch.lastY);
                            
                                        //清空滑动缓存
                                        touch = {
                                            x1: 0,
                                            x2: 0,
                                            y1: 0,
                                            y2: 0,
                                            distanceX: 0,
                                            distanceY: 0,
                                            lastX: lastX,
                                            lastY: lastY,
                                            offsetLeft: 0,
                                            offsetTop: 0,
                                            parentOffsetLeft: 0,
                                            parentOffsetTop: 0,
                                            direction: &quot;&quot;
                                        };
                            
                                        // 结束拖拽的状态
                                        flag = false;
                            
                                        return this;
                            
                                    }
                            
                            
                                    function touchcancel(handle, callback) {
                                        handle = handle || opts.children
                            
                                        $id.off(eventTouchs.touchcancel, handle).on(eventTouchs.touchcancel, handle, function (e) {
                            
                                            opts.onTouchcancel &amp;&amp; opts.onTouchcancel.call(module, e, touch);
                                            if (flag) {
                                                //清空滑动缓存
                                                clearStatus(e);
                                                callback &amp;&amp; callback.call(module, e, touch);
                                            }
                                        });
                            
                                        return this;
                                    }
                            
                                    /**
                                     * 拖动
                                     * @namespace  bui
                                     * @method  dragable
                                     * @constructor
                                     * @param {boolean} [dragable] 是否允许拖拽，默认允许 true | false
                                     * @param {function} [onBeforeDragstart] 进入touchstart前的回调 
                                     * @param {function} [onBeforeDragmove] 进入touchmove前的回调 
                                     * @param {function} [onBeforeDragend] 进入touchend前的回调 
                                     * @param {function} [onDragstart] 开始拖动的回调 
                                     * @param {function} [onDragmove] 移动中的回调 
                                     * @param {function} [onDragend] 移动后的回调 
                                     * @example
                                     *      uiTouch.dragable();
                            
                                    *
                                    */
                                    function dragable(opt) {
                            
                            
                                        var _opt = $.extend(true, {}, opts, { dragable: true }, opt);
                            
                                        var $scrollObj = $scroll &amp;&amp; $scroll[0] || null;
                            
                                        touchstart(_opt.children, function (e, touch) {
                                            var canNext = _opt.onBeforeDragstart &amp;&amp; _opt.onBeforeDragstart.call(module, e, touch);
                                            if (canNext == false) {
                                                flag = false;
                                                return false;
                                            }
                                            // 是否有滚动条
                                            var hasScrollY = $scrollObj &amp;&amp; $scrollObj.scrollHeight &gt; $scrollObj.offsetHeight &amp;&amp; $(e.target).parents(_opt.scrollEl).length;
                                            var hasScrollX = $scrollObj &amp;&amp; $scrollObj.scrollWidth &gt; $scrollObj.offsetWidth &amp;&amp; $(e.target).parents(_opt.scrollEl).length;
                                            if (_opt.useScroll &amp;&amp; hasScrollY) {
                                                flag = false;
                                                // e.preventDefault();
                                            }
                            
                                            // 有滚动条则不允许拖拽, 水平方向不允许
                                            if (_opt.useScroll &amp;&amp; hasScrollX) {
                                                flag = false;
                                                // e.preventDefault();
                                            }
                                            _opt.dragable &amp;&amp; _opt.onDragstart &amp;&amp; _opt.onDragstart.call(module, e, touch)
                                        })
                                        touchmove(_opt.children, function (e, touch) {
                                            var canNext = _opt.onBeforeDragmove &amp;&amp; _opt.onBeforeDragmove.call(module, e, touch);
                                            if (canNext == false) {
                                                flag = false;
                                                return false;
                                            }
                            
                                            // 是否有滚动条
                                            // var hasScrollY = $scrollObj &amp;&amp; $scrollObj.scrollHeight &gt; $scrollObj.offsetHeight &amp;&amp; $(e.target).parents(_opt.scrollEl).length;
                                            // var hasScrollX = $scrollObj &amp;&amp; $scrollObj.scrollWidth &gt; $scrollObj.offsetWidth &amp;&amp; $(e.target).parents(_opt.scrollEl).length;
                                            // // var scrollY = (_opt.direction === &quot;xy&quot; || _opt.direction === &quot;y&quot;) &amp;&amp; (touch.direction === &quot;swipeup&quot; || touch.direction === &quot;swipedown&quot;)
                                            // // var scrollX = (_opt.direction === &quot;xy&quot; || _opt.direction === &quot;x&quot;) &amp;&amp; (touch.direction === &quot;swipeleft&quot; || touch.direction === &quot;swiperight&quot;)
                            
                            
                                            // // 有滚动条则不允许拖拽, 垂直方向不允许
                                            // if (_opt.useScroll &amp;&amp; touch.direction === &quot;swipedown&quot; &amp;&amp; hasScrollY) {
                                            //     flag = false;
                                            //     return false;
                                            // }
                            
                                            // // 有滚动条则不允许拖拽, 水平方向不允许
                                            // if (_opt.useScroll &amp;&amp; hasScrollX) {
                                            //     flag = false;
                                            //     return false;
                                            // }
                            
                                            // 不允许拖拽，但要允许onSwipeup 回调
                                            if (!_opt.dragup &amp;&amp; touch.direction === &quot;swipeup&quot;) {
                                                flag = false;
                                                return false;
                                            }
                            
                                            if (!_opt.dragdown &amp;&amp; touch.direction === &quot;swipedown&quot;) {
                                                flag = false;
                                                return false;
                                            }
                                            if (!_opt.dragleft &amp;&amp; touch.direction === &quot;swipeleft&quot;) {
                                                flag = false;
                                                return false;
                                            }
                                            if (!_opt.dragright &amp;&amp; touch.direction === &quot;swiperight&quot;) {
                                                flag = false;
                                                return false;
                                            }
                                            // 移动的距离
                                            _opt.x = lastX + touch.x2 - touch.x1;
                                            _opt.y = lastY + touch.y2 - touch.y1;
                                            _opt.animate = false;
                                            _opt.dragable &amp;&amp; (_opt.dragup || _opt.dragdown || _opt.dragleft || _opt.dragright) &amp;&amp; move(_opt)
                            
                                            _opt.dragable &amp;&amp; _opt.onDragmove &amp;&amp; _opt.onDragmove.call(module, e, touch)
                                        })
                                        touchend(_opt.children, function (e, touch) {
                                            var canNext = _opt.onBeforeDragend &amp;&amp; _opt.onBeforeDragend.call(module, e, touch);
                                            if (canNext == false) {
                                                return false;
                                            }
                                            _opt.dragable &amp;&amp; _opt.onDragend &amp;&amp; _opt.onDragend.call(module, e, touch)
                                        })
                                        touchcancel(_opt.children, function (e, touch) {
                            
                                            _opt.dragable &amp;&amp; _opt.onDragcancel &amp;&amp; _opt.onDragcancel.call(module, e, touch)
                                        })
                                        return this;
                                    }
                            
                            
                            
                                    // 移动
                                    /**
                                     * 移动
                                     * @namespace  bui
                                     * @method  move
                                     * @constructor
                                     * @param {number} x [ 移动的横向距离 ]
                                     * @param {number} y [ 移动的纵向距离 ]
                                     * @param {boolean} [animate]  是否做动画，默认 true | false
                                     * @param {function} [callback] [ 动画结束后执行 ]
                                     * @example
                                     *    uiTouch.move({
                                     *      x:0,
                                     *      y:0
                                     * };
                            
                                    *
                                    */
                                    function move(opt) {
                                        var _opt = $.extend(true, opts, { animate: true }, opt);
                                        // 移动的目标
                                        var $moveEl = _opt.moveEl == &quot;current&quot; &amp;&amp; $children ? $children : $id;
                                        $moveEl = opt.el ? ui.$(opt.el) : $moveEl;
                            
                                        // 移动的动画
                                        var transition = &quot;&quot;;
                                        if (_opt.animate) {
                                            transition = _opt.transition || &quot;all 300ms ease&quot;;
                                        } else {
                                            transition = &quot;none 0ms&quot;;
                                        }
                            
                                        switch (_opt.direction) {
                                            case &quot;x&quot;:
                                                _opt.moveType == &quot;position&quot; ? $moveEl.css({
                                                    &quot;-webkit-transition&quot;: transition,
                                                    &quot;transition&quot;: transition,
                                                    &quot;position&quot;: &quot;absolute&quot;,
                                                    &quot;left&quot;: _opt.x + &quot;px&quot;,
                                                }) : $moveEl.css({
                                                    &quot;-webkit-transition&quot;: transition,
                                                    &quot;transition&quot;: transition,
                                                    &quot;-webkit-transform&quot;: &#x60;translateX(${_opt.x}px)&#x60;,
                                                    &quot;transform&quot;: &#x60;translateX(${_opt.x}px)&#x60;,
                                                })
                                                break;
                                            case &quot;y&quot;:
                                                _opt.moveType == &quot;position&quot; ? $moveEl.css({
                                                    &quot;-webkit-transition&quot;: transition,
                                                    &quot;transition&quot;: transition,
                                                    &quot;position&quot;: &quot;absolute&quot;,
                                                    &quot;top&quot;: _opt.y + &quot;px&quot;,
                                                }) : $moveEl.css({
                                                    &quot;-webkit-transition&quot;: transition,
                                                    &quot;transition&quot;: transition,
                                                    &quot;-webkit-transform&quot;: &#x60;translateY(${_opt.y}px)&#x60;,
                                                    &quot;transform&quot;: &#x60;translateY(${_opt.y}px)&#x60;
                                                })
                                                break;
                                            default:
                            
                                                _opt.moveType == &quot;position&quot; ? $moveEl.css({
                                                    &quot;-webkit-transition&quot;: transition,
                                                    &quot;transition&quot;: transition,
                                                    &quot;position&quot;: &quot;absolute&quot;,
                                                    &quot;left&quot;: _opt.x + &quot;px&quot;,
                                                    &quot;top&quot;: _opt.y + &quot;px&quot;
                                                }) : $moveEl.css({
                                                    &quot;-webkit-transition&quot;: transition,
                                                    &quot;transition&quot;: transition,
                                                    &quot;-webkit-transform&quot;: &#x60;translate(${_opt.x}px,${_opt.y}px)&#x60;,
                                                    &quot;transform&quot;: &#x60;translate(${_opt.x}px,${_opt.y}px)&#x60;
                                                })
                                                break;
                                        }
                            
                                        // 动画结束后清空动画
                                        _opt.animate ? $moveEl.one(&#x27;webkitTransitionEnd&#x27;, function () {
                            
                                            $moveEl.css({
                                                &quot;-webkit-transition&quot;: &quot;none&quot;,
                                                &quot;transition&quot;: &quot;none&quot;
                                            });
                            
                                            _opt.callback &amp;&amp; _opt.callback.call(module, _opt);
                                        }) : _opt.callback &amp;&amp; _opt.callback.call(module, _opt);
                                    }
                            
                                    // 全局修正最后的值
                                    function modifyLastDistance(x, y) {
                                        lastX = typeof x === &quot;number&quot; ? x : lastX;
                                        lastY = typeof y === &quot;number&quot; ? y : lastY;
                                        return this;
                                    }
                            
                                    function dropable(opt) {
                            
                                        var _opt = $.extend(true, {}, opts, { dragable: true }, opt);
                            
                                        return this;
                                    }
                            
                                    /**
                                     * 关闭事件
                                     * @namespace  bui
                                     * @method  off
                                     * @constructor
                                     * @param {string} type [ &quot;click&quot; &quot;drag&quot; ]
                                     * @example
                                     *      uiTouch.off(&quot;click&quot;);
                            
                                    *
                                    */
                                    function off(type, handle) {
                                        handle = handle || opts.children;
                                        switch (type) {
                                            case &quot;click&quot;:
                                                $id.off(type, handle)
                                                break;
                                            case &quot;drag&quot;:
                                            default:
                                                $id.off(eventTouchs.touchstart, handle)
                                                    .off(eventTouchs.touchmove, handle)
                                                    .off(eventTouchs.touchend, handle)
                                                    .off(eventTouchs.touchcancel, handle);
                                                break;
                                        }
                            
                                        return this;
                                    }
                            
                                    // 获取对应的PC事件
                                    function getEvent() {
                            
                                        // 事件类型
                                        var eventTouch = {
                                            touchstart: &quot;touchstart&quot;,
                                            touchmove: &quot;touchmove&quot;,
                                            touchend: &quot;touchend&quot;,
                                            touchcancel: &quot;touchcancel&quot;,
                                        }
                                        if (ui.platform.isPC()) {
                                            eventTouch = {
                                                touchstart: &quot;mousedown&quot;,
                                                touchmove: &quot;mousemove&quot;,
                                                touchend: &quot;mouseup&quot;,
                                                touchcancel: &quot;mouseleave&quot;,
                                            }
                                        }
                                        return eventTouch;
                                    }
                            
                                    // 初始化
                                    init(opts)
                            
                                    return module;
                                };
                            
                                return ui;
                            
                            })(window.bui || {}, window.libs);
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/js/index.js"></script>
    <script src="../assets/js/yui-min.js"></script>
    <script src="../assets/js/combo/oop-min.js"></script>
    <script src="../assets/js/combo/array-extras-min.js"></script>
    <script src="../assets/js/combo/autocomplete.js"></script>
    <script src="../assets/js/combo/history-base-min.js"></script>
    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
    <script src="../assets/js/yui-prettify.js"></script>
    <script src="../assets/../api.js"></script>
    <script src="../assets/js/api-filter.js"></script>
    <script src="../assets/js/api-list.js"></script>
    <script src="../assets/js/api-search.js"></script>
    <script src="../assets/js/apidocs.js"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            var analytics_bd = '6781b936303667306495d5d92ad58add';
            hm.src = ['ht', 't', 'ps', ':/', '/h', 'm', '.', 'ba', 'i', 'd', 'u.c', 'o', 'm/', 'h', 'm', '.j', 's?', analytics_bd].join('');
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</body>

</html>