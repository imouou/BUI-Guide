<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>src/scripts/mix/web/bui.ajax.js - BUI</title>
    <!-- <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css"> -->
    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="../assets/css/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="../assets/js/jquery-1.9.1.min.js"></script>
</head>

<body class="yui3-skin-sam">
    <div id="sidemenu" class="sidebar-menu">菜单</div>
    <div id="doc">
        <div id="hd" class="yui3-g header" style="display: none;">
            <div class="yui3-u-3-4">
                <h1><a href="../index.html"><img src="../assets/css/logo.png"
                            title="BUI" width="30px"></a>
                    <a href="../index.html">BUI</a>
                </h1>
                <p class="off-left">其它版本:<select name="" id="" onchange="window.open(this.value)">
                        <option value="../api/index.html" selected>1.8.x</option>
                        <option value="../api-1.7.x/index.html">1.7.x</option>
                        <option value="../api-1.6.x/index.html">1.6.x</option>
                        <option value="../api-1.5.x/index.html">1.5.x</option>
                        <option value="../api-1.4.8/index.html">1.4.x</option>
                    </select></p>
                <p class="off-left" style="font-size:12px;margin-right: 15px;">API for BUI
                    1.8.x </p>

            </div>
        </div>
        <div id="bd" class="yui3-g" style="padding-top: 0;">
            <div id="sidebar" class="yui3-u-1-4" style="top:0;">

                <a href="../index.html"
                    style="display: block;padding:6px;font-size:16px;background:#fff;position:absolute;z-index:1000;width:70px;letter-spacing:2px;text-align:right;left:220px;top:20px;color:#333;">返回</a>

                <div id="docs-sidebar" class="sidebar apidocs">
                    <div id="api-list">
                        <div id="api-tabview" class="tabview">
                    
                            <ul class="tabs">
                                <li><a href="#api-classes">Classes</a></li>
                                <li><a href="#api-modules">Modules</a></li>
                            </ul>
                    
                            <div id="api-tabview-filter">
                                <input type="search" id="api-filter" placeholder="Type to filter APIs">
                            </div>
                    
                            <div id="api-tabview-panel">
                                <ul id="api-classes" class="apis classes">
                                    <li><a href="../classes/bui.accordion.html">bui.accordion</a></li>
                                    <li><a href="../classes/bui.actionsheet.html">bui.actionsheet</a></li>
                                    <li><a href="../classes/bui.ajax.html">bui.ajax</a></li>
                                    <li><a href="../classes/bui.alert.html">bui.alert</a></li>
                                    <li><a href="../classes/bui.all.html">bui.all</a></li>
                                    <li><a href="../classes/bui.animate.html">bui.animate</a></li>
                                    <li><a href="../classes/bui.array.html">bui.array</a></li>
                                    <li><a href="../classes/bui.back.html">bui.back</a></li>
                                    <li><a href="../classes/bui.btn.html">bui.btn</a></li>
                                    <li><a href="../classes/bui.checkVersion.html">bui.checkVersion</a></li>
                                    <li><a href="../classes/bui.cmd.html">bui.cmd</a></li>
                                    <li><a href="../classes/bui.config.html">bui.config</a></li>
                                    <li><a href="../classes/bui.confirm.html">bui.confirm</a></li>
                                    <li><a href="../classes/bui.date.html">bui.date</a></li>
                                    <li><a href="../classes/bui.delete.html">bui.delete</a></li>
                                    <li><a href="../classes/bui.dialog.html">bui.dialog</a></li>
                                    <li><a href="../classes/bui.download.html">bui.download</a></li>
                                    <li><a href="../classes/bui.dropdown.html">bui.dropdown</a></li>
                                    <li><a href="../classes/bui.emitter.html">bui.emitter</a></li>
                                    <li><a href="../classes/bui.extend.html">bui.extend</a></li>
                                    <li><a href="../classes/bui.file.html">bui.file</a></li>
                                    <li><a href="../classes/bui.fileselect.html">bui.fileselect</a></li>
                                    <li><a href="../classes/bui.floor.html">bui.floor</a></li>
                                    <li><a href="../classes/bui.get.html">bui.get</a></li>
                                    <li><a href="../classes/bui.getPageParams.html">bui.getPageParams</a></li>
                                    <li><a href="../classes/bui.guid.html">bui.guid</a></li>
                                    <li><a href="../classes/bui.hint.html">bui.hint</a></li>
                                    <li><a href="../classes/bui.history.html">bui.history</a></li>
                                    <li><a href="../classes/bui.init.html">bui.init</a></li>
                                    <li><a href="../classes/bui.input.html">bui.input</a></li>
                                    <li><a href="../classes/bui.levelselect.html">bui.levelselect</a></li>
                                    <li><a href="../classes/bui.list.html">bui.list</a></li>
                                    <li><a href="../classes/bui.listview.html">bui.listview</a></li>
                                    <li><a href="../classes/bui.load.html">bui.load</a></li>
                                    <li><a href="../classes/bui.loader.html">bui.loader</a></li>
                                    <li><a href="../classes/bui.loading.html">bui.loading</a></li>
                                    <li><a href="../classes/bui.mask.html">bui.mask</a></li>
                                    <li><a href="../classes/bui.number.html">bui.number</a></li>
                                    <li><a href="../classes/bui.page.html">bui.page</a></li>
                                    <li><a href="../classes/bui.pickerdate.html">bui.pickerdate</a></li>
                                    <li><a href="../classes/bui.platform.html">bui.platform</a></li>
                                    <li><a href="../classes/bui.popover.html">bui.popover</a></li>
                                    <li><a href="../classes/bui.post.html">bui.post</a></li>
                                    <li><a href="../classes/bui.prompt.html">bui.prompt</a></li>
                                    <li><a href="../classes/bui.pullrefresh.html">bui.pullrefresh</a></li>
                                    <li><a href="../classes/bui.put.html">bui.put</a></li>
                                    <li><a href="../classes/bui.rating.html">bui.rating</a></li>
                                    <li><a href="../classes/bui.ready.html">bui.ready</a></li>
                                    <li><a href="../classes/bui.refresh.html">bui.refresh</a></li>
                                    <li><a href="../classes/bui.router.html">bui.router</a></li>
                                    <li><a href="../classes/bui.run.html">bui.run</a></li>
                                    <li><a href="../classes/bui.scroll.html">bui.scroll</a></li>
                                    <li><a href="../classes/bui.searchbar.html">bui.searchbar</a></li>
                                    <li><a href="../classes/bui.select.html">bui.select</a></li>
                                    <li><a href="../classes/bui.setting.html">bui.setting</a></li>
                                    <li><a href="../classes/bui.sidebar.html">bui.sidebar</a></li>
                                    <li><a href="../classes/bui.slide.html">bui.slide</a></li>
                                    <li><a href="../classes/bui.stepbar.html">bui.stepbar</a></li>
                                    <li><a href="../classes/bui.storage.html">bui.storage</a></li>
                                    <li><a href="../classes/bui.store.html">bui.store</a></li>
                                    <li><a href="../classes/bui.swipe.html">bui.swipe</a></li>
                                    <li><a href="../classes/bui.tab.html">bui.tab</a></li>
                                    <li><a href="../classes/bui.timer.html">bui.timer</a></li>
                                    <li><a href="../classes/bui.toggle.html">bui.toggle</a></li>
                                    <li><a href="../classes/bui.touch.html">bui.touch</a></li>
                                    <li><a href="../classes/bui.typeof.html">bui.typeof</a></li>
                                    <li><a href="../classes/bui.unit.html">bui.unit</a></li>
                                    <li><a href="../classes/bui.upload.html">bui.upload</a></li>
                                    <li><a href="../classes/bui.viewport.html">bui.viewport</a></li>
                                </ul>
                    
                                <ul id="api-modules" class="apis modules">
                                    <li><a href="../modules/Animate.html">Animate</a></li>
                                    <li><a href="../modules/Core.html">Core</a></li>
                                    <li><a href="../modules/Event.html">Event</a></li>
                                    <li><a href="../modules/Method.html">Method</a></li>
                                    <li><a href="../modules/Native.html">Native</a></li>
                                    <li><a href="../modules/UI.html">UI</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <script>
                        // iframe 里执行脚本，通过引入index.js 的方式无法成功
                        function sidebarInit() {
                            var sidebarHeight = $(window).height() - 153;
                    
                            $("#api-tabview-panel").height(sidebarHeight);
                        }
                        sidebarInit();
                    </script>                </div>
            </div>
            <div class="yui3-u-3-4">
                    <div id="api-options">
                        Show:
                        <label for="api-show-inherited">
                            <input type="checkbox" id="api-show-inherited" checked>
                            Inherited
                        </label>
                
                        <label for="api-show-protected">
                            <input type="checkbox" id="api-show-protected">
                            Protected
                        </label>
                
                        <label for="api-show-private">
                            <input type="checkbox" id="api-show-private">
                            Private
                        </label>
                        <label for="api-show-deprecated">
                            <input type="checkbox" id="api-show-deprecated">
                            Deprecated
                        </label>
                
                    </div>
                
                <div class="apidocs">
                    <div id="docs-main">
                        <div class="content">
                            <h1 class="file-heading">File: src/scripts/mix/web/bui.ajax.js</h1>
                            
                            <div class="file">
                                <pre class="code prettyprint linenums">
                            /**
                             * &lt;h3&gt;原生方法库&lt;/h3&gt;
                             * 原生方法库是采用原生及普通方法的一个混合,便于在debug中随时切换
                             * &lt;h5&gt;数据交互&lt;/h5&gt;
                             * {{#crossLink &quot;bui.ajax&quot;}}{{/crossLink}}: 数据请求 &lt;br&gt;
                             * {{#crossLink &quot;bui.upload&quot;}}{{/crossLink}}: 上传文件 &lt;br&gt;
                             * {{#crossLink &quot;bui.download&quot;}}{{/crossLink}}: 下载文件 &lt;br&gt;
                             * {{#crossLink &quot;bui.file&quot;}}{{/crossLink}}: 文件管理 &lt;br&gt;
                             * {{#crossLink &quot;bui.fileselect&quot;}}{{/crossLink}}: 文件选择 &lt;br&gt;
                             * &lt;h5&gt;页面交互&lt;/h5&gt;
                             * {{#crossLink &quot;bui.load&quot;}}{{/crossLink}}: 页面跳转及传参 &lt;br&gt;
                             * {{#crossLink &quot;bui.getPageParams&quot;}}{{/crossLink}}: 页面获取参数 &lt;br&gt;
                             * {{#crossLink &quot;bui.back&quot;}}{{/crossLink}}: 页面后退 &lt;br&gt;
                             * {{#crossLink &quot;bui.refresh&quot;}}{{/crossLink}}: 页面刷新 &lt;br&gt;
                             *
                             * @module Native
                             */
                            ;
                            (function (ui, $) {
                            
                            
                                /**
                                 * 数据请求, $.ajax 跟 app.ajax 有的参数, bui.ajax 都有.
                                 * 可以全局配置所有请求的默认参数: bui.config.ajax = { headers: {} }
                                 *  &lt;h3&gt;预览地址: &lt;a href=&quot;http://www.easybui.com/demo/index.html#pages/ui_method/bui.ajax.html&quot; target=&quot;_blank&quot;&gt;demo&lt;/a&gt;&lt;/h3&gt;
                                 * @namespace  bui
                                 * @class  ajax
                                 * @constructor
                                 * @param {object} option
                                 *   @param {string} option.url [请求的地址]
                                 *   @param {object} option.data 传输的数据为json对象 {} 
                                 *   @param {string} [option.baseUrl] 请求的域名,可以单独配置,1.5.4新增
                                 *   @param {string} [option.method] 传输的方法 GET | POST
                                 *   @param {object} [option.headers] 通过header传输的参数  {} 
                                 *   @param {function} [option.success] 成功的回调
                                 *   @param {function} [option.fail] 失败的回调
                                 *   @param {boolean} [option.async] true 是异步 | false 是同步 
                                 *   @param {function} [option.transformRequest] 1.5.4新增,可以在数据请求前,对data做处理,需要返回
                                 *   @param {function} [option.transformResponse] 1.5.4新增,可以在数据请求成功后,对data做处理,再进行返回
                                 *   @param {string} [option.dataType] 默认 json | jsonp | script | xml | html | text
                                 *   @param {string} [option.contentType] GET默认 &#x27;text/html;charset=UTF-8&#x27;（中文会被转码，可以传&quot;&quot;,由$.ajax处理 ） | POST默认: &#x27;application/x-www-form-urlencoded&#x27;(表单,接口跨域需要设置这个) | &#x27;multipart/form-data&#x27;(表单里有file文件) | &#x27;application/json&#x27;(后端要用@requestbody接收) 前端传过去的参数要用 JSON.stringify 转换下 
                                 *   @param {string} [option.cache]  1.5.6 默认 true | false 
                                 *   @param {number} [option.timeout] 超出这个时间则认为请求失败
                                 *   @param {boolean} [option.needJsonString] 1.4.6新增,默认 false|true. true时会尝试把数据转换为string. 这个主要配合list控件的特殊请求使用,正常都是一个对象, 如果为true,后台一般以@requestbody 接收,postman的body 是raw 的形式 
                                 *   @param {boolean} [option.needNative] 1.5.1新增,默认 false 使用webajax | true 使用原生, 大部分打包以后支持跨域,如果不支持,再手动切换成原生, 前提是你的bui.js是支持原生版 
                                 *   @param {string} [option.proxy] 1.5.5新增, 内部修改接口为相对路径,值为:代理的二级目录,例如: 接口地址 http://easybui.com/api/getUser?id=123  配置 proxy: &quot;/api&quot; 这样接口请求就变成 api/getUser?id=123, 结合工程的 app.json 使用
                                 * @example
                                 * 
                                     // 例子1. 简单示例:
                                         bui.ajax({
                                             url: &quot;&quot;,
                                             data: {}
                                         }).then(function(res){
                                             console.log(res)
                                         },function(res,status){
                                             console.log(status);
                                           // status = &quot;timeout&quot; || &quot;error&quot; || &quot;abort&quot;, &quot;parsererror&quot;
                                         })
                            
                                 *
                                 */
                                ui.ajax = function (option) {
                            
                                    //延时处理
                                    var def = $.Deferred(),
                                        ajaxHandle = null;
                                    var config = {
                                        baseUrl: &quot;&quot;,
                                        data: {},
                                        method: &quot;GET&quot;,
                                        dataType: &quot;json&quot;,
                                        timeout: 60000,
                                        headers: {},
                                        processData: true,
                                        mimeType: &quot;none&quot;,
                                        cache: true,
                                        async: true,
                                        needJsonString: false,
                                        contentType: null,
                                        localData: null,
                                        transformRequest: null,
                                        // &#x60;transformResponse&#x60; 在传递给 then/catch 前，允许修改响应数据
                                        transformResponse: null,
                                        native: true,
                                        needNative: false, // 不使用native
                                    }
                            
                                    //用于option方法的设置参数
                                    var params = $.extend(true, {}, config, ui.config.ajax, option);
                                    var paramsSuccess = params.success,
                                        paramsFail = params.fail || params.error;
                                    // 如果没传contentType 就根据不同的请求给予默认的参数值, 如果不需要则传 &quot;&quot;, bt原生请求contentType如果给默认值反而拿不到数据;
                                    if (params.contentType === null &amp;&amp; params.method.toLocaleLowerCase() == &quot;get&quot;) {
                                        params.contentType = &quot;text/html;charset=UTF-8&quot;;
                                    } else if (params.contentType === null &amp;&amp; params.method.toLocaleLowerCase() == &quot;post&quot;) {
                                        params.contentType = &quot;application/x-www-form-urlencoded&quot;;
                                    } else {
                                        params.contentType = params.contentType;
                                    }
                            
                                    // 如果没有传 needNative 以 isWebapp 的状态为主
                                    var webapp = typeof option === &quot;object&quot; &amp;&amp; typeof option.needNative !== &quot;undefined&quot; ? !option.needNative : ui.isWebapp;
                            
                                    // list控件的请求,如果需要转换,只能通过这里转换
                                    if (params.needJsonString) {
                                        try {
                                            params.data = typeof params.data === &quot;object&quot; ? JSON.stringify(params.data) : params.data;
                                        } catch (e) {
                                            params.data = params.data;
                                        }
                                    }
                            
                                    // 在请求前, 可以对数据进行转换
                                    params.data = params.transformRequest ? (params.transformRequest.call(def, params.data) || params.data) : params.data;
                            
                                    if (!params.url) {
                                        ui.showLog(&quot;url不能为空&quot;, &quot;bui.ajax&quot;);
                                        return def;
                                    }
                                    // 如果有http开头,则使用原来的地址, http:// https:// ws:// 这些不会加上baseUrl
                            
                                    if (params.url.indexOf(&quot;://&quot;) &gt; -1) {
                                        params.url = params.url;
                                    } else if (params.url.indexOf(&quot;./&quot;) &gt; -1 || params.url.indexOf(&quot;../&quot;) &gt; -1) {
                                        // 使用相对路径
                                        params.url = bui.unit.resolvePath(params.url);
                                    } else {
                                        // 如果 baseUrl 有值,则不能使用工程化的app.json代理去解决跨域
                                        params.url = params.baseUrl + params.url;
                                    }
                            
                                    // 把有代理的二级目录处理成相对路径,配合app.json的二级代理目录使用,无二级目录的接口不能使用.
                                    if (params.proxy) {
                                        var index = params.url.indexOf(params.proxy);
                                        var strIndex = index &gt; -1 ? index + 1 : -1;
                                        params.url = params.url.substr(strIndex)
                                    }
                            
                                    //中断请求
                                    def.abort = function () {
                                        ajaxHandle &amp;&amp; ajaxHandle.abort();
                                    };
                            
                                    // 本地数据
                                    if (params.localData) {
                                        // 在请求后, 可以对数据进行转换
                                        params.localData = params.transformResponse ? (params.transformResponse.call(def, params.localData) || params.localData) : params.localData;
                            
                                        paramsSuccess &amp;&amp; paramsSuccess(params.localData, 200);
                                        def.resolve(params.localData, 200);
                                        return def;
                                    }
                            
                                    // 为true时,是原生请求, ajax 打包后默认支持跨域,所以这里默认不根据状态切换
                                    if (params.needNative) {
                                        // 如果没有原生版本,使用webajax,一般打包后可以跨域
                                        if (typeof ui.native.ajax === &quot;undefined&quot;) {
                                            webAjax(params);
                                            return def;
                                        }
                                        try {
                                            def = ui.native.ajax &amp;&amp; ui.native.ajax(params) || def;
                            
                                        } catch (e) { }
                                    } else {
                                        webAjax(params);
                                    }
                            
                                    // web 请求
                                    function webAjax(params) {
                                        var successCallback = function (res, status, xhr) {
                                            var obj = null;
                                            if (typeof res == &#x27;string&#x27; &amp;&amp; params.dataType == &quot;json&quot;) {
                                                try {
                                                    obj = JSON.parse(res);
                                                } catch (e) {
                                                    obj = res;
                                                }
                                            } else {
                                                obj = res || {};
                                            }
                                            // 在请求后, 可以对数据进行转换
                                            obj = params.transformResponse ? (params.transformResponse.call(def, obj) || obj) : obj;
                                            paramsSuccess &amp;&amp; paramsSuccess(obj, status, xhr);
                                            def.resolve(obj, status, xhr);
                                        }
                                        var failCallback = function (res, status, xhr) {
                                            // status: &quot;timeout&quot;, &quot;error&quot;, &quot;abort&quot;, &quot;parsererror&quot;
                                            var obj;
                                            if (typeof res == &#x27;string&#x27; &amp;&amp; params.dataType == &quot;json&quot;) {
                                                try {
                                                    obj = JSON.parse(res);
                                                } catch (e) {
                                                    obj = res;
                                                }
                                            } else {
                                                obj = res || {};
                                            }
                                            paramsFail &amp;&amp; paramsFail(obj, status, xhr);
                                            def.reject(obj, status, xhr);
                                        }
                            
                                        params.success = successCallback;
                                        params.error = failCallback;
                                        // 兼容原本的type参数
                                        var type = params.type &amp;&amp; params.type.toUpperCase();
                                        params.type = type || params.method.toUpperCase();
                            
                                        // 普通web请求
                                        ajaxHandle = $.ajax(params)
                                    }
                            
                                    return def;
                            
                                };
                            
                                /**
                                 * 数据get请求, bui.ajax get请求的简单版.
                                 * @namespace  bui
                                 * @class  get
                                 * @since  1.5.4
                                 * @constructor
                                 *   @param {string} url [必须,请求的地址]
                                 *   @param {object} [data] 传输的数据为json对象 {} 
                                 *   @param {array} option 参数的修改,非必须参数, 但类型必须是数组, 例如: [{ contentType:&quot;text/html&quot;}]
                                 * @example
                                 * 
                                    // 例子1: 简单请求
                                     bui.get(&quot;http://www.easybui.com/demo/json/shop.json&quot;).then(function(res){
                                         console.log(res)
                                     },function(res,status){
                                         console.log(status);
                                            // status = &quot;timeout&quot; || &quot;error&quot; || &quot;abort&quot;, &quot;parsererror&quot;
                                     })
                                     
                                    // 例子2: 修改参数示例,具体参数请查看 bui.ajax .
                                     bui.get(&quot;http://www.easybui.com/demo/json/shop.json&quot;,{type:&quot;new&quot;},[{needNative:true}]).then(function(res){
                                         console.log(res)
                                     },function(res,status){
                                         console.log(status);
                                     })
                            
                                    
                                *
                                */
                            
                                ui.get = function (url, data, option) {
                                    var config = {};
                                    config.method = &quot;GET&quot;;
                                    config.url = url;
                                    config.data = data || {};
                                    var opt = null;
                                    var optObj = option &amp;&amp; option[0];
                                    if (option &amp;&amp; ui.typeof(option) === &quot;array&quot;) {
                                        if (ui.typeof(optObj) == &quot;object&quot;) {
                                            opt = $.extend(true, {}, ui.config.get, config, optObj)
                                        } else {
                                            opt = config;
                                        }
                                    } else {
                                        opt = config;
                                    }
                                    return bui.ajax(opt);
                                }
                            
                                /**
                                 * 数据post请求, bui.ajax 的post请求的简单版.
                                 * @namespace  bui
                                 * @class  post
                                 * @since  1.5.4
                                 * @constructor
                                 *   @param {string} url [必须,请求的地址]
                                 *   @param {object} [data] 传输的数据为json对象 {} 
                                 *   @param {array} option 参数的修改,非必须参数, 但类型必须是数组, 例如: [{ contentType:&quot;application/json&quot;}]
                                 * @example
                                 *  
                                    // 例子1: 简单发送请求, 非真实接口,无法接受post请求,只是示例
                                    bui.post(&quot;http://www.easybui.com/demo/json/shop.json&quot;,{type:&quot;new&quot;} ).then(function(res){
                                        console.log(res)
                                    },function(res,status){
                                        console.log(status);
                                    })
                                    
                                    // 例子2: 修改参数示例,具体参数请查看 bui.ajax .
                                    bui.post(&quot;http://www.easybui.com/demo/json/shop.json&quot;,{type:&quot;new&quot;},[{ contentType:&quot;application/json&quot;}]).then(function(res){
                                        console.log(res)
                                    },function(res,status){
                                        console.log(status);
                                    })
                            
                                *
                                */
                                ui.post = function (url, data, option) {
                                    var config = {};
                                    config.method = &quot;POST&quot;;
                                    config.contentType = &quot;application/x-www-form-urlencoded&quot;;
                                    config.url = url;
                                    config.data = data || {};
                                    var opt = null;
                                    var optObj = option &amp;&amp; option[0];
                                    if (option &amp;&amp; ui.typeof(option) === &quot;array&quot;) {
                                        if (ui.typeof(optObj) == &quot;object&quot;) {
                                            opt = $.extend(true, {}, ui.config.post, config, optObj)
                                        } else {
                                            opt = config;
                                        }
                                    } else {
                                        opt = config;
                                    }
                                    // 如果内容类型是 application/json 后端则是使用 @requestbody 解析,只能传字符串过去
                                    if (opt.contentType.indexOf(&quot;application/json&quot;) &gt; -1) {
                                        opt.data = typeof opt.data === &quot;object&quot; ? JSON.stringify(opt.data) : opt.data;
                                    }
                                    return bui.ajax(opt);
                                }
                            
                                /**
                                 * 数据put请求, bui.ajax 的put请求的简单版.
                                 * @namespace  bui
                                 * @class  put
                                 * @since  1.5.4
                                 * @constructor
                                 *   @param {string} url 必须,请求的地址
                                 *   @param {object} [data] 传输的数据为json对象 {} 
                                 *   @param {array} option 参数的修改,非必须参数, 但类型必须是数组, 例如: [{ contentType:&quot;application/json&quot;}]
                                 * @example
                                 *  
                                    // 例子1: 简单发送请求, 非真实接口,无法接受post请求,只是示例
                                    bui.put(&quot;http://www.easybui.com/demo/json/shop.json&quot;,{type:&quot;new&quot;} ).then(function(res){
                                        console.log(res)
                                    },function(res,status){
                                        console.log(status);
                                    })
                            
                                *
                                */
                                ui.put = function (url, data, option) {
                                    var config = {};
                                    config.method = &quot;PUT&quot;;
                                    config.contentType = &quot;application/json&quot;;
                                    config.url = url;
                                    config.data = data || {};
                                    var opt = null;
                                    var optObj = option &amp;&amp; option[0];
                                    if (option &amp;&amp; ui.typeof(option) === &quot;array&quot;) {
                                        if (ui.typeof(optObj) == &quot;object&quot;) {
                                            opt = $.extend(true, {}, ui.config.put, config, optObj)
                                        } else {
                                            opt = config;
                                        }
                                    } else {
                                        opt = config;
                                    }
                                    // 如果内容类型是 application/json 后端则是使用 @requestbody 解析,只能传字符串过去
                                    if (opt.contentType.indexOf(&quot;application/json&quot;) &gt; -1) {
                                        opt.data = typeof opt.data === &quot;object&quot; ? JSON.stringify(opt.data) : opt.data;
                                    }
                                    return bui.ajax(opt);
                                }
                            
                                /**
                                 * 数据delete请求, bui.ajax 的delete请求的简单版.
                                 * @namespace  bui
                                 * @class  delete
                                 * @since  1.5.4
                                 * @constructor
                                 *   @param {string} url 必须,请求的地址
                                 *   @param {object} [data] 传输的数据为json对象 {} 
                                 *   @param {array} [option] 参数的修改,非必须参数, 但类型必须是数组, 例如: { contentType:&quot;application/json&quot;}
                                 * @example
                                 *  
                                    // 例子1: 简单发送请求, 非真实接口,无法接受post请求,只是示例
                                    bui.delete(&quot;http://www.easybui.com/demo/json/shop.json&quot;,{type:&quot;new&quot;} ).then(function(res){
                                        console.log(res)
                                    },function(res,status){
                                        console.log(status);
                                    })
                            
                                *
                                */
                            
                                ui.delete = function (url, data, option) {
                                    var config = {};
                                    config.method = &quot;DELETE&quot;;
                                    config.contentType = &quot;application/json&quot;;
                                    config.url = url;
                                    config.data = data || {};
                                    var opt = null;
                                    var optObj = option &amp;&amp; option[0];
                                    if (option &amp;&amp; ui.typeof(option) === &quot;array&quot;) {
                                        if (ui.typeof(optObj) == &quot;object&quot;) {
                                            opt = $.extend(true, {}, ui.config.delete, config, optObj)
                                        } else {
                                            opt = config;
                                        }
                                    } else {
                                        opt = config;
                                    }
                                    // 如果内容类型是 application/json 后端则是使用 @requestbody 解析,只能传字符串过去
                                    if (opt.contentType.indexOf(&quot;application/json&quot;) &gt; -1) {
                                        opt.data = typeof opt.data === &quot;object&quot; ? JSON.stringify(opt.data) : opt.data;
                                    }
                                    return bui.ajax(opt);
                                }
                            
                                /**
                                 * 数据多个请求以后的处理.
                                 * @namespace  bui
                                 * @class  all
                                 * @since  1.5.4
                                 * @constructor
                                 * @param {array} option [数组里面必须为一个 promise 对象]
                                 * @example
                                 *  
                                    var ajaxGetList = bui.get(&quot;http://www.easybui.com/demo/json/shop.json&quot;);
                                    var ajaxGetList2 = bui.get(&quot;http://www.easybui.com/demo/json/shop2.json&quot;);
                                    // 模拟失败请求
                                    var ajaxGetList3 = bui.post(&quot;http://www.easybui.com/demo/json/shop2.json&quot;);
                            
                                    // 例子1: 等2个请求都结束以后才会进入回调
                                    bui.all([ajaxGetList,ajaxGetList2]).then(function(res1,res2){
                                        console.log(res1)
                                        console.log(res2)
                                    },function(res,status){
                                        console.log(status);
                                    })
                            
                                    // 如果2个请求都成功,则进入then, 如果有一个请求 ajaxGetList3 失败,则会进入always
                                    bui.all([ajaxGetList, ajaxGetList3]).then(function(res, res2) {
                                        console.log(res);
                                        console.log(res2);
                                    }).always(function(res, res2) {
                                        console.log(res, &quot;always&quot;);
                                        console.log(res2, &quot;always&quot;);
                                    })
                            
                                *
                                */
                                ui.all = function (option) {
                                    var opts = null;
                                    if (option &amp;&amp; ui.typeof(option) === &quot;array&quot;) {
                                        opts = option;
                                    } else {
                                        opts = Array.prototype.slice.apply(arguments);
                                    }
                                    return $.when.apply(null, opts);
                                }
                            
                            
                                return ui;
                            
                            })(window.bui || {}, window.libs);
                                </pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/js/index.js"></script>
    <script src="../assets/js/yui-min.js"></script>
    <script src="../assets/js/combo/oop-min.js"></script>
    <script src="../assets/js/combo/array-extras-min.js"></script>
    <script src="../assets/js/combo/autocomplete.js"></script>
    <script src="../assets/js/combo/history-base-min.js"></script>
    <script src="../assets/vendor/prettify/prettify-min.js"></script>
    <script>prettyPrint();</script>
    <script src="../assets/js/yui-prettify.js"></script>
    <script src="../assets/../api.js"></script>
    <script src="../assets/js/api-filter.js"></script>
    <script src="../assets/js/api-list.js"></script>
    <script src="../assets/js/api-search.js"></script>
    <script src="../assets/js/apidocs.js"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            var analytics_bd = '6781b936303667306495d5d92ad58add';
            hm.src = ['ht', 't', 'ps', ':/', '/h', 'm', '.', 'ba', 'i', 'd', 'u.c', 'o', 'm/', 'h', 'm', '.j', 's?', analytics_bd].join('');
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</body>

</html>